jQuery(document).ready(function(e){"use strict";var t;e.SPMegaMenu={reInit:function(t){e("li.sp-mega-menu-item").each(function(t){var n=e(this),r=e(".enable-mega-menu",n);if(!n.is(".menu-item-depth-0")){var i=e("li.sp-mega-menu-item").filter(":eq( "+(t-1)+" )");if(i.is(".sp-mega-menu-enable")){n.addClass("sp-mega-menu-enable");r.prop("checked",!1)}else n.removeClass("sp-mega-menu-enable")}if(n.is(".menu-item-depth-0")||n.is(".menu-item-depth-1")){n.find(".use-textblock").prop("checked",!1);n.removeClass("is-text-block")}});typeof t!="undefined"&&t.item.is(".menu-item-depth-0")&&t.item.find(".enable-mega-menu").prop("checked")===!1&&t.item.find(".item-type-sp-mega-menu-text").hide()},init:function(){function n(){var t;e(".media-upload").on("click",function(n){n.preventDefault();var r=e(this).parents("p");t=wp.media.frames.mediaFrame=wp.media({library:{type:"image"},multiple:!1});t.on("select",function(){var e=t.state().get("selection").first().toJSON();r.find("input.media-file").val(e.url)});t.open()})}n();e("#menu-to-edit").on("sortstop",function(n,r){clearTimeout(t);t=setTimeout(function(){e.SPMegaMenu.reInit(r)},300)});e("#menu-to-edit").on("click",".enable-mega-menu",function(){var t=e(this),n=t.parents(".menu-item").eq(0);t.is(":checked")?n.addClass("sp-mega-menu-enable").trigger("refreshItems"):n.removeClass("sp-mega-menu-enable").trigger("refreshItems")});e("#menu-to-edit").on("refreshItems",function(){e.SPMegaMenu.reInit()});e("#menu-to-edit").on("change",".sp-mega-menu-item .use-textblock",function(){e.SPMegaMenu.reInit();if(e(this).is(":checked")){e(this).parents("li.sp-mega-menu-item").addClass("is-text-block");n()}else e(this).parents("li.sp-mega-menu-item").removeClass("is-text-block")})}};e.SPMegaMenu.init();e.SPMegaMenu.reInit()});